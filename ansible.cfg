# File: ansible.cfg
# Place this file in the root of your repository (next to setup_mac.yml)
# This configuration optimizes Ansible for macOS local execution, performance, and reliability.

[defaults]
# Python interpreter discovery: auto_silent avoids noisy warnings on macOS
interpreter_python = auto_silent

# Use /tmp for remote_tmp to avoid filling up the user's home directory
# (especially useful if ~ is on a small SSD partition or has quota limits)
remote_tmp = /tmp/.ansible-${USER}/tmp

# Enable pipelining: reduces the number of SSH connections (faster execution)
# Requires no tty (which is fine for localhost connection)
pipelining = True

# Disable host key checking for localhost (safe and avoids prompts)
host_key_checking = False

# Prevent cowsay errors if it's not installed
no_target_syslog = True

# Retry failed tasks automatically (useful for flaky network/Homebrew downloads)
retry_files_enabled = True
retry_files_save_path = ~/.ansible/retry-files

# Increase timeout for long-running tasks (e.g., Homebrew installs or large downloads)
timeout = 60

# Display more concise output
callback_result_format = yaml

# Suppress unnecessary warnings about deprecated features
deprecation_warnings = False
command_warnings = False

# Inventory
inventory = inventory.ini

[ssh_connection]
# Keep pipelining benefits over SSH (if you ever use this playbook remotely)
ssh_args = -C -o ControlMaster=auto -o ControlPersist=60s